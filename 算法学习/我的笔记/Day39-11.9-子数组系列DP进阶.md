# Day39 - å­æ•°ç»„ç³»åˆ—DPè¿›é˜¶

**æ—¥æœŸ**ï¼š2025å¹´11æœˆ9æ—¥  
**å­¦ä¹ é‡ç‚¹**ï¼šå­æ•°ç»„DPé—®é¢˜è¿›é˜¶ï¼ˆç¬¦å·DPã€è®¡æ•°DPã€çŠ¶æ€æœºDPç­‰ï¼‰

---

## ğŸ“‹ ä»Šæ—¥è®¡åˆ’

### å­æ•°ç»„ç³»åˆ—DPè¿›é˜¶
- [x] ä¹˜ç§¯ä¸ºæ­£æ•°çš„æœ€é•¿å­æ•°ç»„é•¿åº¦ï¼ˆç¬¦å·DPï¼‰â­âœ…
- [x] ç­‰å·®æ•°åˆ—åˆ’åˆ†ï¼ˆè®¡æ•°DPï¼‰âœ…
- [x] æœ€é•¿æ¹æµå­æ•°ç»„ï¼ˆçŠ¶æ€æœºDPï¼‰âœ…
- [ ] å•è¯æ‹†åˆ†ï¼ˆå­—ç¬¦ä¸²DPï¼‰
- [ ] ç¯ç»•å­—ç¬¦ä¸²ä¸­å”¯ä¸€çš„å­å­—ç¬¦ä¸²ï¼ˆå­—ç¬¦ä¸²DPï¼‰

---

## ğŸ¯ å­¦ä¹ ç›®æ ‡

1. æŒæ¡ç¬¦å·DPçš„å¤„ç†æŠ€å·§ï¼ˆæ­£è´Ÿå·çŠ¶æ€ï¼‰
2. ç†è§£è®¡æ•°DPçš„çŠ¶æ€è®¾è®¡
3. å­¦ä¹ çŠ¶æ€æœºDPçš„åº”ç”¨
4. æŒæ¡å­—ç¬¦ä¸²å­æ•°ç»„é—®é¢˜çš„DPè§£æ³•

---

## ğŸ“ é¢˜ç›®è®°å½•

### é¢˜ç›®1ï¼šä¹˜ç§¯ä¸ºæ­£æ•°çš„æœ€é•¿å­æ•°ç»„é•¿åº¦ â­

**é¢˜ç›®é“¾æ¥**ï¼š[LeetCode 1567 - ä¹˜ç§¯ä¸ºæ­£æ•°çš„æœ€é•¿å­æ•°ç»„é•¿åº¦](https://leetcode.cn/problems/maximum-length-of-subarray-with-positive-product/)

**æ ¸å¿ƒæ€è·¯**ï¼š
- çŠ¶æ€ï¼š`pos[i]` = ä»¥`nums[i]`ç»“å°¾ä¹˜ç§¯ä¸ºæ­£çš„æœ€é•¿é•¿åº¦
- çŠ¶æ€ï¼š`neg[i]` = ä»¥`nums[i]`ç»“å°¾ä¹˜ç§¯ä¸ºè´Ÿçš„æœ€é•¿é•¿åº¦
- è½¬ç§»ï¼š
  - `nums[i] > 0`ï¼šæ­£æ•°æ¥æ­£ä»æ­£ï¼Œæ­£æ•°æ¥è´Ÿä»è´Ÿ
  - `nums[i] < 0`ï¼šè´Ÿæ•°æ¥è´Ÿå¾—æ­£ï¼ˆè´Ÿè´Ÿå¾—æ­£ï¼‰ï¼Œè´Ÿæ•°æ¥æ­£å¾—è´Ÿ
  - `nums[i] == 0`ï¼šé‡ç½®ä¸º0
- å…³é”®ï¼šè´Ÿæ•°æ—¶æ­£è´ŸçŠ¶æ€äº¤æ¢

**ACä»£ç **ï¼š

```cpp
class Solution {
public:
    int getMaxLen(vector<int>& nums) {
        // ä¹˜ç§¯ä¸ºæ­£æ•°çš„æœ€é•¿å­æ•°ç»„é•¿åº¦ - ç¬¦å·DP
        // æ—¶é—´å¤æ‚åº¦ï¼šO(n)
        // ç©ºé—´å¤æ‚åº¦ï¼šO(n)
        // Cursor Write It-qcf
        
        int n = nums.size();
        vector<int> pos(n, 0);  // ä»¥iç»“å°¾çš„æ­£ä¹˜ç§¯æœ€é•¿é•¿åº¦
        vector<int> neg(n, 0);  // ä»¥iç»“å°¾çš„è´Ÿä¹˜ç§¯æœ€é•¿é•¿åº¦
        
        // åˆå§‹åŒ–
        if(nums[0] > 0)
            pos[0] = 1;
        else if(nums[0] < 0)
            neg[0] = 1;
        
        // å¡«è¡¨
        for(int i = 1; i < n; i++) {
            if(nums[i] > 0) {
                pos[i] = pos[i-1] + 1;  // æ­£æ•°æ¥åœ¨æ­£ä¹˜ç§¯åä¿æŒæ­£
                neg[i] = (neg[i-1] > 0) ? neg[i-1] + 1 : 0;  // è´Ÿæ•°æ¥åœ¨è´Ÿä¹˜ç§¯åä¿æŒè´Ÿ
            }
            else if(nums[i] < 0) {
                pos[i] = (neg[i-1] > 0) ? neg[i-1] + 1 : 0;  // è´Ÿæ•°æ¥åœ¨è´Ÿä¹˜ç§¯åå¾—æ­£
                neg[i] = pos[i-1] + 1;  // æ­£æ•°æ¥åœ¨æ­£ä¹˜ç§¯åå¾—è´Ÿ
            }
            else {  // nums[i] == 0
                pos[i] = 0;
                neg[i] = 0;
            }
        }
        
        // è¿”å›å€¼
        return *max_element(pos.begin(), pos.end());
    }
};
```

---

### é¢˜ç›®2ï¼šç­‰å·®æ•°åˆ—åˆ’åˆ†

**é¢˜ç›®é“¾æ¥**ï¼š[LeetCode 413 - ç­‰å·®æ•°åˆ—åˆ’åˆ†](https://leetcode.cn/problems/arithmetic-slices/)

**æ ¸å¿ƒæ€è·¯**ï¼š
- çŠ¶æ€ï¼š`dp[i]` = ä»¥`nums[i]`ç»“å°¾çš„ç­‰å·®æ•°åˆ—ä¸ªæ•°
- è½¬ç§»ï¼šå¦‚æœ`nums[i]-nums[i-1] == nums[i-1]-nums[i-2]`ï¼Œåˆ™`dp[i] = dp[i-1] + 1`
- å…³é”®ï¼šæ–°å¢çš„é•¿åº¦ä¸º3çš„ç­‰å·®æ•°åˆ— + ä¹‹å‰çš„æ‰€æœ‰ç­‰å·®æ•°åˆ—å»¶é•¿
- ç­”æ¡ˆï¼šæ‰€æœ‰`dp[i]`çš„å’Œ

**ACä»£ç **ï¼š

```cpp
class Solution {
public:
    int numberOfArithmeticSlices(vector<int>& nums) {
        // ç­‰å·®æ•°åˆ—åˆ’åˆ† - è®¡æ•°DP
        // æ—¶é—´å¤æ‚åº¦ï¼šO(n)
        // ç©ºé—´å¤æ‚åº¦ï¼šO(n)
        // Cursor Write It-qcf
        
        int n = nums.size();
        if(n < 3) return 0;  // éœ€è¦è‡³å°‘ä¸‰ä¸ªå…ƒç´ 
        
        // 1.åˆ›å»ºdpè¡¨
        vector<int> dp(n);
        
        // 2.åˆå§‹åŒ–
        dp[0] = 0;
        dp[1] = 0;
        
        // 3.å¡«è¡¨
        for(int i = 2; i < n; i++) {
            if(nums[i] - nums[i-1] == nums[i-1] - nums[i-2])
                dp[i] = dp[i-1] + 1;
            else 
                dp[i] = 0;
        }
        
        // 4.è¿”å›å€¼ï¼ˆæ‰€æœ‰dp[i]çš„å’Œï¼‰
        int ret = 0;
        for(int i = 0; i < n; i++) {
            ret += dp[i];
        }
        return ret;
    }
};
```

---

### é¢˜ç›®3ï¼šæœ€é•¿æ¹æµå­æ•°ç»„

**é¢˜ç›®é“¾æ¥**ï¼š[LeetCode 978 - æœ€é•¿æ¹æµå­æ•°ç»„](https://leetcode.cn/problems/longest-turbulent-subarray/)

**æ ¸å¿ƒæ€è·¯**ï¼š
- çŠ¶æ€ï¼š`up[i]` = ä»¥`arr[i]`ç»“å°¾ï¼Œä¸”`arr[i] > arr[i-1]`çš„æœ€é•¿é•¿åº¦
- çŠ¶æ€ï¼š`down[i]` = ä»¥`arr[i]`ç»“å°¾ï¼Œä¸”`arr[i] < arr[i-1]`çš„æœ€é•¿é•¿åº¦
- è½¬ç§»ï¼š
  - `arr[i] > arr[i-1]`ï¼š`up[i] = down[i-1] + 1`ï¼Œ`down[i] = 1`
  - `arr[i] < arr[i-1]`ï¼š`down[i] = up[i-1] + 1`ï¼Œ`up[i] = 1`
  - `arr[i] == arr[i-1]`ï¼š`up[i] = 1, down[i] = 1`
- å…³é”®ï¼šçŠ¶æ€æœºDPï¼Œä¸Šå‡å’Œä¸‹é™çŠ¶æ€äº¤æ›¿

**ACä»£ç **ï¼š

```cpp
class Solution {
public:
    int maxTurbulenceSize(vector<int>& arr) {
        // æœ€é•¿æ¹æµå­æ•°ç»„ - çŠ¶æ€æœºDP
        // æ—¶é—´å¤æ‚åº¦ï¼šO(n)
        // ç©ºé—´å¤æ‚åº¦ï¼šO(n)
        // Cursor Write It-qcf
        
        int n = arr.size();
        if(n == 1) return 1;
        
        // 1.åˆ›å»ºdpè¡¨
        // up[i] = ä»¥arr[i]ç»“å°¾ï¼Œä¸”arr[i] > arr[i-1]
        vector<int> up(n);
        // down[i] = ä»¥arr[i]ç»“å°¾ï¼Œä¸”arr[i] < arr[i-1]
        vector<int> down(n);
        
        // åˆå§‹åŒ–
        up[0] = 1;
        down[0] = 1;
        
        // å¡«è¡¨
        for(int i = 1; i < n; i++) {
            if(arr[i] > arr[i-1]) {
                up[i] = down[i-1] + 1;  // å¯ä»¥ä»down[i-1]è½¬ç§»ï¼Œç°åœ¨ä¸Šå‡
                down[i] = 1;  // æ— æ³•ä»ä¸‹é™è½¬ç§»ï¼Œé‡ç½®ä¸º1ï¼ˆå•ä¸ªå…ƒç´ ï¼‰
            }
            else if(arr[i] < arr[i-1]) {
                down[i] = up[i-1] + 1;
                up[i] = 1;
            }
            else {
                up[i] = 1;
                down[i] = 1;
            }
        }
        
        // è¿”å›å€¼
        int ret = 0;
        for(int i = 1; i < n; i++) {
            ret = max({up[i], down[i], ret});
        }
        return ret;
    }
};
```

---

### é¢˜ç›®4ï¼šå•è¯æ‹†åˆ†

**é¢˜ç›®é“¾æ¥**ï¼š[LeetCode 139 - å•è¯æ‹†åˆ†](https://leetcode.cn/problems/word-break/)

**æ ¸å¿ƒæ€è·¯**ï¼š

**ACä»£ç **ï¼š

```cpp

```

---

### é¢˜ç›®5ï¼šç¯ç»•å­—ç¬¦ä¸²ä¸­å”¯ä¸€çš„å­å­—ç¬¦ä¸²

**é¢˜ç›®é“¾æ¥**ï¼š[LeetCode 467 - ç¯ç»•å­—ç¬¦ä¸²ä¸­å”¯ä¸€çš„å­å­—ç¬¦ä¸²](https://leetcode.cn/problems/unique-substrings-in-wraparound-string/)

**æ ¸å¿ƒæ€è·¯**ï¼š

**ACä»£ç **ï¼š

```cpp

```

---

## ğŸ’¡ ä»Šæ—¥æ€»ç»“

### æ ¸å¿ƒæ”¶è·

1. **ç¬¦å·DP**ï¼šç»´æŠ¤æ­£è´Ÿä¸¤ç§çŠ¶æ€
2. **è®¡æ•°DP**ï¼šç»Ÿè®¡æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ä¸ªæ•°
3. **çŠ¶æ€æœºDP**ï¼šæ ¹æ®æ¡ä»¶åˆ‡æ¢çŠ¶æ€
4. **å­—ç¬¦ä¸²DP**ï¼šå¤„ç†å­—ç¬¦ä¸²å­æ•°ç»„/å­ä¸²é—®é¢˜

### å…³é”®æŠ€å·§

- ç¬¦å·DPï¼šç”¨`pos`å’Œ`neg`ä¸¤ä¸ªçŠ¶æ€
- è®¡æ•°DPï¼šç´¯åŠ æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„æ•°é‡
- çŠ¶æ€æœºDPï¼šæ ¹æ®å¤§å°å…³ç³»åˆ‡æ¢çŠ¶æ€
- å­—ç¬¦ä¸²DPï¼šç”¨`set`æˆ–`map`ä¼˜åŒ–æŸ¥æ‰¾

---

## ğŸ¯ ä¸‹æ¬¡é¢„å‘Š

**å¯èƒ½æ–¹å‘**ï¼š
1. åŒºé—´DPå…¥é—¨
2. æ ‘å½¢DPåŸºç¡€
3. çŠ¶æ€å‹ç¼©DP

---

*ç¬”è®°æ ¼å¼ï¼šç®€æ´è®°å½•æ ¸å¿ƒæ€è·¯å’ŒACä»£ç *  
*Cursor Write It-qcf*

